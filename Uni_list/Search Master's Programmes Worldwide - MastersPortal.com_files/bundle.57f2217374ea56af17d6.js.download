!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=3)}([function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(7)),i(n(11))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AnonymousStudentProfileUpdated="anonymous-student-profile-updated",e.AnonymousStudentProfileSynced="anonymous-student-profile-synced"}(t.EventType||(t.EventType={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function u(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,u)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.CompletenessTracker=class{constructor(e,t,n,i){this.eventAggregationService=e,this.anonymousStudent=t,this.snowplow=n,this.dataStorage=i}get storageKey(){return`ProfileCompletenessTracker/${this.type}`}initialize(){return i(this,void 0,void 0,(function*(){this.eventAggregationService.subscribeTo(o.AnonymousStudentProfileUpdated.EventType,this),yield this.updateCompleteness()}))}updateCompleteness(){return i(this,void 0,void 0,(function*(){const e=yield this.anonymousStudent.getStudentDataCompleteness(this.scope),t=Number(this.dataStorage.retrieve(this.storageKey));this.isCompletenessChanged(e,t)&&(this.trackCompleteness(e),this.dataStorage.store(this.storageKey,e.toString()))}))}trackCompleteness(e){this.snowplow("trackStructEvent",this.service,`completeness_given - ${e}`,this.type)}notify(e){return i(this,void 0,void 0,(function*(){yield this.updateCompleteness()}))}isCompletenessChanged(e,t){return t!==e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(6),s=n(14),r=n(15),u=window.EventAggregationService,c=window.AnonymousStudent,a=window.snowplow,d=i.DataStorage,l=new r.BestFitCompleteness(u,c,a,d),_=new o.BestFitAcademicCompleteness(u,c,a,d),p=new s.BestFitBudgetCompleteness(u,c,a,d);l.initialize(),_.initialize(),p.initialize()},function(e,t,n){"use strict";var i=new(n(5).DataStorage);i.init(),e.exports={DataStorage:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.enabled=!1}return e.prototype.init=function(){try{if("undefined"==typeof localStorage)return void(this.enabled=!1);localStorage.setItem("test","dummy value"),localStorage.removeItem("test"),this.enabled=!0}catch(e){this.enabled=!1}},e.prototype.store=function(e,t,n){if(void 0===n&&(n=1800),this.enabled){var i=new Date,o={expires:i.setSeconds(i.getSeconds()+n),data:t};localStorage[e]=JSON.stringify(o)}else document.cookie=e+"="+t+";expires="+n/86400;return!0},e.prototype.retrieve=function(e){if(this.enabled){var t=localStorage[e];try{t=JSON.parse(t)}catch(e){t={}}if(!t||!t.hasOwnProperty("expires")||!t.hasOwnProperty("data"))return"";var n=parseInt(t.expires,10);return isNaN(n)&&(n=0),new Date>=new Date(n)?(localStorage[e]=null,""):t.data}return this.getCookie(e)},e.prototype.remove=function(e){this.enabled?delete localStorage[e]:document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.prototype.update=function(e,t,n){var i=this.retrieve(e);return"object"!=typeof i&&(i={}),i=Object.assign({},i,t),this.store(e,i,n),i},e.prototype.getCookie=function(e){var t=RegExp(e+"=.[^;]*"),n=document.cookie.match(t);return n?n[0].split("=")[1]:""},e}();t.DataStorage=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);class s extends o.CompletenessTracker{constructor(){super(...arguments),this.service="BestFit",this.type="academic",this.scope=[i.StudentField.STUDY_LEVEL,i.StudentField.STUDY_COUNTRY_ID,i.StudentField.DISCIPLINES,i.StudentField.GPA,i.StudentField.WORK_EXPERIENCE,i.StudentField.PROFICIENCY_TYPE]}}t.BestFitAcademicCompleteness=s},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(1)),i(n(8)),i(n(9)),i(n(10))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COUNTRY="interests_countries",e.DISCIPLINE="interests_disciplines"}(t.InterestType||(t.InterestType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.IDENTITY="identity",e.EMAIL="email",e.NAME="name",e.FIRST_NAME="first_name",e.LAST_NAME="last_name",e.GENDER="gender",e.BIRTH_DATE="birth_date",e.TELEPHONE="telephone",e.START_PERIOD="start_period",e.FUNDING_TYPE="funding_type",e.STUDY_LEVEL="study_level",e.PREFERRED_STUDY_LEVEL="preferred_study_level",e.RESIDENCE_COUNTRY_ID="residence_country_id",e.NATIONALITY_COUNTRY_ID="nationality_country_id",e.STUDY_COUNTRY_ID="study_country_id",e.REGISTRATION_IP="registration_ip",e.REGISTRATION_PORTAL_TYPE="registration_portal_type",e.WORK_EXPERIENCE="work_experience",e.PROFICIENCY_TYPE="proficiency_type",e.PROFICIENCY_TEST="proficiency_test",e.PROFICIENCY_SCORE="proficiency_score",e.IELTS="ielts",e.CAE="cae",e.FCE="fce",e.TOEFL_IBT="toefl_ibt",e.TOEFL_PBT="toefl_pbt",e.SELF_ASSESSMENT_PROFICIENCY="self_assessment_proficiency",e.INITIAL_REGISTRATION_PLATFORM="initial_registration_platform",e.EMAILING_OTHER="emailing_other",e.EMAILING_FAVOURITES="emailing_favourites",e.EMAILING_SCHOLARSHIPS="emailing_scholarships",e.EMAILING_UPDATES="emailing_updates",e.LAST_LOGIN="last_login",e.LAST_LOGIN_UTC="last_login_utc",e.DATE_CREATED="date_created",e.DATE_CREATED_UTC="date_created_utc",e.LOGINS="logins",e.DISCIPLINES="disciplines",e.INTERESTS_COUNTRIES="interests_countries",e.INTERESTS_DISCIPLINES="interests_disciplines",e.EMAIL_UNSUBSCRIBE_TOKEN="emailUnsubscribeToken",e.GDPR_ACCEPTED="gdpr_accepted",e.ORIGIN_ORGANISATION_ID="origin_organisation_id",e.GPA="gpa",e.LIVING_BUDGET="living_budget",e.TUITION_BUDGET="tuition_budget",e.SEEN_COMPARISON_TUTORIAL="seen_comparison_tutorial",e.ACCOMPLISHMENTS="accomplishments"}(t.StudentField||(t.StudentField={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.PENDING=0]="PENDING",e[e.ONLINE=1]="ONLINE",e[e.OFFLINE=2]="OFFLINE"}(t.StudentRepositoryStateType||(t.StudentRepositoryStateType={}))},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(12)),i(n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);class o{constructor(e,t){this.timestamp=e,this.state=t}}t.AnonymousStudentProfileSynced=o,o.EventType=i.EventType.AnonymousStudentProfileSynced},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);class o{constructor(e,t,n){this.timestamp=e,this.state=t,this.changes=n}}t.AnonymousStudentProfileUpdated=o,o.EventType=i.EventType.AnonymousStudentProfileUpdated},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);class s extends o.CompletenessTracker{constructor(){super(...arguments),this.service="BestFit",this.type="budget",this.scope=[i.StudentField.TUITION_BUDGET,i.StudentField.LIVING_BUDGET]}}t.BestFitBudgetCompleteness=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);class s extends o.CompletenessTracker{constructor(){super(...arguments),this.service="BestFit",this.type="bestfit",this.scope=[i.StudentField.STUDY_LEVEL,i.StudentField.STUDY_COUNTRY_ID,i.StudentField.DISCIPLINES,i.StudentField.GPA,i.StudentField.WORK_EXPERIENCE,i.StudentField.PROFICIENCY_TYPE,i.StudentField.TUITION_BUDGET,i.StudentField.LIVING_BUDGET]}}t.BestFitCompleteness=s}]);