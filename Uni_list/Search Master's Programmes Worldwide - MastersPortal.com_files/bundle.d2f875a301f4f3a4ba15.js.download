!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=16)}([function(t,e,n){t.exports=n(9)(9)},function(t,e,n){t.exports=n(9)(1)},function(t,e,n){t.exports=n(9)(8)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){t.exports=library},function(t,e,n){"use strict";var o=n(3);n.n(o).a},function(t,e,n){"use strict";var o=n(4);n.n(o).a},function(t,e,n){"use strict";var o=n(5);n.n(o).a},function(t,e,n){"use strict";var o=n(6);n.n(o).a},function(t,e,n){"use strict";var o=n(7);n.n(o).a},function(t,e,n){"use strict";var o=n(8);n.n(o).a},function(t,e,n){"use strict";n.r(e);var o,i=n(1),r=n(0),s=n(2),a=new i.default,c={Wishlisting:"Wishlisting",Profile:"Profile"},u={FavouriteAdd:"favourite_add",FavouriteRemove:"favourite_remove",RegisterIncentiveClick:"Register Incentive Click"},l={FavouriteAdd:"Favourite add"},f=function(){function t(){this.trackingDictionary={actions:u,categories:c,labels:l}}return t.prototype.GA=function(t){return void 0===window.Shared||void 0===window.Shared.GA?null:void window.Shared.GA.fireTracker({category:t.category,action:t.action,label:t.label,value:t.value})},t.prototype.snowPlow=function(t){if(void 0===window.snowplow)return null;window.snowplow("trackStructEvent",t.category,t.action,t.label||"",t.property||"",t.value||0)},t}(),d=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isVisible=!1,e.closedByUserKey="WishlistButton/ClosedPopover",e.officialProgrammeButtonPopoverClosedByUserKey="OfficialProgrammeButton/ClosedPopover",e}return d(e,t),Object.defineProperty(e.prototype,"studyId",{get:function(){return this.$root.$props.studyId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closedByUser",{get:function(){var t=window.Loot;return!(!t||!t.DataStorage)&&!0===t.DataStorage.retrieve(this.closedByUserKey)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"officialProgrammeButtonPopoverClosed",{get:function(){var t=window.Loot;return!(!t||!t.DataStorage)&&!0===t.DataStorage.retrieve(this.officialProgrammeButtonPopoverClosedByUserKey)},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){var t=this;this.closedByUser||this.officialProgrammeButtonPopoverClosed&&(this.setFloatingBarListeners(),a.$on("addFavourite",(function(){a.$off("addFavourite"),t.closePopOver()})))},e.prototype.setFloatingBarListeners=function(){var t=this;document.addEventListener("ShowEssentialInformation",(function(){t.isVisible=!0})),document.addEventListener("HideEssentialInformation",(function(){t.isVisible=!1}))},e.prototype.onPopOverClick=function(t){t.stopPropagation()},e.prototype.closePopOver=function(){this.$el.remove(),this.$destroy(),this.saveClosingFlag()},e.prototype.saveClosingFlag=function(){var t=window.Loot;t&&t.DataStorage&&t.DataStorage.store(this.closedByUserKey,!0)},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([r.Component],e)}(r.Vue);function h(t,e,n,o,i,r,s,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),o&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):i&&(c=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,c):[c]}return{exports:t,options:u}}n(10);var v=h(p,(function(){var t=this.$createElement,e=this._self._c||t;return this.isVisible?e("div",{staticClass:"WishlistButtonPopover",on:{click:this.onPopOverClick}},[e("i",{staticClass:"CloseIcon lnr-cross",on:{click:this.closePopOver}}),this._v(" "),e("p",[this._v("\n            Save this programme to your wishlist and compare them side-by-side.\n        ")])]):this._e()}),[],!1,null,"0384b3fa",null);v.options.__file="Popover.vue";var y=v.exports,b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=r.Vue.extend({props:["studyId"]}),w=h(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialAnimationTimeout=45e3,e.animationInterval=45e3,e.animationTriggered=!1,e.isAnimated=!1,e.popoverInitialized=!1,e.canAnimate=!1,e}return b(e,t),Object.defineProperty(e.prototype,"tracking",{get:function(){return new f},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"studyId",{get:function(){return parseInt(this.$root.$props.study_id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonLocation",{get:function(){return String(this.$root.$props.button_location)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wishlisted",{get:function(){var t=this;return this.$store.state.wishlist.filter((function(e){return e.study.id===t.studyId})).length>0},enumerable:!0,configurable:!0}),e.prototype.created=function(){var t=this;document.addEventListener("trigger_action_animations",(function(){t.canAnimate=!0}))},e.prototype.mounted=function(){if("study_fixed_essential_information"===this.buttonLocation){var t=document.createElement("div");this.$el.appendChild(t),new g({el:t,propsData:{studyId:this.studyId},render:function(t){return t(y)}})}},e.prototype.favouriteStudy=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=null),null!==e&&e.preventDefault(),this.wishlisted?this.removeFavourite():(a.$emit("addFavourite",this.studyId),this.addFavourite(t))},e.prototype.animateButton=function(){var t=this;this.animationTriggered||(this.animationTriggered=!0,setTimeout((function(){t.shouldBeAnimated()&&t.toggleAnimation(),setInterval((function(){t.shouldBeAnimated()&&t.toggleAnimation()}),t.animationInterval)}),this.initialAnimationTimeout))},e.prototype.toggleAnimation=function(){var t=this;this.isAnimated=!0,setTimeout((function(){t.isAnimated=!1}),2e3)},e.prototype.shouldBeAnimated=function(){return!this.$el.classList.contains("OffCanvas")&&!this.wishlisted&&this.canAnimate},e.prototype.addFavourite=function(t){t&&!1===this.$store.state.loggedIn&&this.openRegistrationPopup(),this.$store.dispatch("addFavourite",this.studyId),this.trackStudy(this.tracking.trackingDictionary.actions.FavouriteAdd)},e.prototype.removeFavourite=function(){this.$store.dispatch("removeFavourite",this.studyId),this.trackStudy(this.tracking.trackingDictionary.actions.FavouriteRemove)},e.prototype.openRegistrationPopup=function(){document.dispatchEvent(new CustomEvent("RenderAuthenticationService",{detail:{referrer:"FavouriteStudy",tabToShow:"third_party_login"}})),this.trackIncentiveImpression(),this.showWishlistAfterRegistration()},e.prototype.showWishlistAfterRegistration=function(){var t=window.EventAggregationService;t&&t.subscribeToSessionCreatedEvent({notify:function(){document.dispatchEvent(new Event("openWishlistDrawer"))}})},e.prototype.trackStudy=function(t){var e={category:this.tracking.trackingDictionary.categories.Wishlisting,action:t,label:this.$root.$props.button_type,property:this.buttonLocation,value:this.studyId};this.tracking.GA(e),this.tracking.snowPlow(e)},e.prototype.trackIncentiveImpression=function(){var t={category:this.tracking.trackingDictionary.categories.Profile,action:this.tracking.trackingDictionary.actions.RegisterIncentiveClick,label:this.tracking.trackingDictionary.labels.FavouriteAdd};this.tracking.GA(t),this.tracking.snowPlow(t)},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([Object(r.Component)({computed:Object(s.mapGetters)(["isLoggedIn"])})],e)}(r.Vue),void 0,void 0,!1,null,null,null);w.options.__file="Button.vue";var _=w.exports,m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),Object.defineProperty(e.prototype,"openIncentive",{get:function(){return this.$store.getters.bnwModeActive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonLocation",{get:function(){return this.$root.$props.button_location},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){var t=this;"study_fixed_essential_information"===this.buttonLocation&&document.addEventListener("bestfit_fit_saved",(function(){t.animateButton()})),document.addEventListener("wishlist_bnw_mode",(function(){t.$store.commit("triggerBNWMode")})),document.dispatchEvent(new Event("wishlist_bnw_ready"))},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([r.Component],e)}(_),S=(n(11),h(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"IconOnlyButton",class:{"is-animated":t.isAnimated},attrs:{"aria-label":t.wishlisted?"Remove from wishlist":"Add to wishlist"},on:{click:function(e){t.favouriteStudy(t.openIncentive,e)}}},[n("i",{staticClass:"HeartIcon",class:t.wishlisted?"lnr-heart-full":"lnr-heart"})])}),[],!1,null,"66e2a18a",null));S.options.__file="IconOnly.vue";var P=S.exports,A=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offCanvas=!0,e.threshold=300,e}return A(e,t),e.prototype.mounted=function(){this.animateButton(),this.calculateThreshold(),window.addEventListener("scroll",this.showOrHide),window.addEventListener("resize",this.calculateThreshold)},e.prototype.showOrHide=function(){window.pageYOffset>this.threshold?this.offCanvas=!1:window.pageYOffset<this.threshold&&(this.offCanvas=!0)},e.prototype.calculateThreshold=function(){var t=document.getElementById("HeroContainer");t&&(this.threshold=t.clientHeight)},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([r.Component],e)}(_),E=(n(12),h(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"FloatingWishlistButton",class:{OffCanvas:t.offCanvas,"is-animated":t.isAnimated},attrs:{type:"button","aria-label":t.wishlisted?"Remove from wishlist":"Add to wishlist"},on:{click:function(e){t.favouriteStudy(!0)}}},[n("i",{staticClass:"HeartIcon",class:t.wishlisted?"lnr-heart-full":"lnr-heart"}),t._v(" "),n("span",{staticClass:"ButtonText"},[t._v("\n\t\t\t"+t._s(t.wishlisted?"Added to wishlist":"Add to wishlist")+"\n\t\t")])])}),[],!1,null,"28951ae4",null));E.options.__file="Floating.vue";var C=E.exports,I=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return I(e,t),e.prototype.mounted=function(){this.animateButton()},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([r.Component],e)}(_),R=(n(13),h(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"DriverButton StudyHeaderButton",class:{"is-animated":t.isAnimated},on:{click:function(e){t.favouriteStudy(!0)}}},[n("i",{staticClass:"HeartIcon",class:t.wishlisted?"lnr-heart-full":"lnr-heart"}),t._v("\n\t"+t._s(t.wishlisted?"Added to wishlist":"Add to wishlist")+"\n")])}),[],!1,null,"3fef7f4c",null));R.options.__file="StudyHeader.vue";var F=R.exports,B=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.mounted=function(){var t=this;document.addEventListener("bestfit_fit_saved",(function(){t.animateButton()}))},function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([r.Component],e)}(_),$=(n(14),h(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"StudyEssentialInfoButton",on:{click:function(e){t.favouriteStudy(!0)}}},[n("div",{staticClass:"IconWrapper",class:{"is-animated":t.isAnimated}},[n("i",{staticClass:"HeartIcon",class:t.wishlisted?"lnr-heart-full":"lnr-heart"}),t._v(" "),n("i",{staticClass:"HeartIconBackground lnr-heart-full"})]),t._v("\n\t"+t._s(t.wishlisted?"Added to wishlist":"Add to wishlist")+"\n")])}),[],!1,null,"5afe5caa",null));$.options.__file="StudyEssentialInfo.vue";var T=$.exports,D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D(e,t),function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([r.Component],e)}(_),W=(n(15),h(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"DriverButton BestFitButton",on:{click:function(e){t.favouriteStudy(!0)}}},[n("i",{staticClass:"HeartIcon",class:t.wishlisted?"lnr-heart-full":"lnr-heart"}),t._v("\n\t"+t._s(t.wishlisted?"Added to wishlist":"Add to wishlist")+"\n")])}),[],!1,null,"4452cf60",null));W.options.__file="BestFit.vue";var H=W.exports,M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),V=h(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M(e,t),Object.defineProperty(e.prototype,"buttonType",{get:function(){return String(this.$root.$props.button_type)},enumerable:!0,configurable:!0}),function(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}([Object(r.Component)({components:{IconOnly:P,Floating:C,StudyHeader:F,StudyEssentialInfo:T,BestFit:H}})],e)}(r.Vue),(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Favouriting"},["icon_only"==t.buttonType?n("IconOnly"):t._e(),t._v(" "),"floating_button"==t.buttonType?n("Floating"):t._e(),t._v(" "),"study_header"==t.buttonType?n("StudyHeader"):t._e(),t._v(" "),"study_essential_info"==t.buttonType?n("StudyEssentialInfo"):t._e(),t._v(" "),"best_fit"==t.buttonType?n("BestFit"):t._e()],1)}),[],!1,null,null,null);V.options.__file="App.vue";var G=V.exports,U=[function(t){var e={notify:function(){t.dispatch("updateWishlist")}},n=window.EventAggregationService;void 0!==n&&(n.subscribeToFavouriteAddedEvent(e),n.subscribeToFavouriteRemovedEvent(e),function(t,e){var n=window.SessionService;void 0!==n&&(n.isReady?K(n,e):t.subscribeToSessionServiceReadyEvent({notify:function(t){K(t,e)}}),t.subscribeToSessionCreatedEvent({notify:function(t){e.dispatch("setLoggedInState",null!==t.session)}}))}(n,t),t.dispatch("updateWishlist"))}],K=function(t,e){return o=function(){var n;return function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(o){switch(o.label){case 0:return[4,t.getSession()];case 1:return n=null!==o.sent(),e.dispatch("setLoggedInState",n),[2]}}))},new((n=void 0)||(n=Promise))((function(t,e){function i(t){try{s(o.next(t))}catch(t){e(t)}}function r(t){try{s(o.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new n((function(t){t(e.value)})).then(i,r)}s((o=o.apply(void 0,[])).next())}));var n,o},N=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}c((o=o.apply(t,e||[])).next())}))},z=function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},X={syncWishlist:function(t){return N(this,void 0,void 0,(function(){var e;return z(this,(function(n){switch(n.label){case 0:return[4,X.getWishlistData()];case 1:return null!==(e=n.sent())&&(t.state.wishlist=e.favourites.slice(0)),[2,e]}}))}))},getWishlistData:function(){var t=this;return new Promise((function(e){return N(t,void 0,void 0,(function(){var t,n,o=this;return z(this,(function(i){switch(i.label){case 0:return void 0!==(t=window.wishlistService)?[3,1]:(window.EventAggregationService.subscribeToWishlistServiceReadyEvent({notify:function(){return N(o,void 0,void 0,(function(){var t;return z(this,(function(n){switch(n.label){case 0:return t=e,[4,X.getDataFromWishlistService(window.wishlistService)];case 1:return t.apply(void 0,[n.sent()]),[2]}}))}))}}),[3,3]);case 1:return n=e,[4,X.getDataFromWishlistService(t)];case 2:n.apply(void 0,[i.sent()]),i.label=3;case 3:return[2]}}))}))}))},getDataFromWishlistService:function(t){return N(this,void 0,void 0,(function(){var e;return z(this,(function(n){switch(n.label){case 0:return[4,t.getWishlist()];case 1:return(e=n.sent())?[2,e]:[2,null]}}))}))}},Y=X,q=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}c((o=o.apply(t,e||[])).next())}))},J=function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Q={addFavourite:function(t,e){var n=t.dispatch,o=t.commit,i=t.getters;return q(this,void 0,void 0,(function(){return J(this,(function(t){switch(t.label){case 0:return i.wishlistLimitReached?(n("fireWishlistLimitReachedEvent"),[2]):[4,o("addFavourite",e)];case 1:return t.sent(),[4,window.wishlistService.addFavourite(e)];case 2:return t.sent(),[2]}}))}))},removeFavourite:function(t,e){var n=t.commit;return q(this,void 0,void 0,(function(){return J(this,(function(t){switch(t.label){case 0:return[4,n("removeFavourite",e)];case 1:return t.sent(),[4,window.wishlistService.removeFavourite(e)];case 2:return t.sent(),[2]}}))}))},updateWishlist:function(t){var e=t.dispatch,n=t.commit;return q(this,void 0,void 0,(function(){return J(this,(function(t){switch(t.label){case 0:return[4,Y.syncWishlist(this)];case 1:return null===t.sent()?(n("handleErrorState"),[2]):(e("fireWishlistSyncedEvent"),[2])}}))}))},fireWishlistSyncedEvent:function(){document.dispatchEvent(new Event("wishlist_synced"))},fireWishlistLimitReachedEvent:function(){document.dispatchEvent(new CustomEvent("Notification",{detail:{key:"WishlistLimitReached"}}))},setLoggedInState:function(t,e){(0,t.commit)("setLoggedInState",e)}};i.default.use(s.default);var Z=new s.default.Store({state:{wishlist:[],error:null,loggedIn:!1,bnwModeActive:!1},getters:{wishlistLimitReached:function(t){return t.wishlist.length>=99},bnwModeActive:function(t){return t.bnwModeActive},isLoggedIn:function(t){return t.loggedIn}},mutations:{handleErrorState:function(t){t.error="sync_error"},triggerBNWMode:function(t){t.bnwModeActive=!0},setLoggedInState:function(t,e){t.loggedIn=e},addFavourite:function(t,e){var n=t.wishlist.slice();n.push({study:{id:e}}),t.wishlist=n},removeFavourite:function(t,e){var n=t.wishlist.slice();t.wishlist=n.filter((function(t){return t.study.id!=e}))}},actions:Q,plugins:U});i.default.config.productionTip=!1;var tt=i.default.extend({store:Z,props:["study_id","button_type","button_location"],render:function(t){return t(G)}});function et(){for(var t=document.querySelectorAll(".WishlistButton"),e=0;e<t.length;e++){var n=t[e].getAttribute("data-study-id"),o=t[e].getAttribute("data-button-type"),i=t[e].getAttribute("data-button-location");new tt({el:t[e],propsData:{study_id:n,button_type:o,button_location:i}})}document.dispatchEvent(new Event("wishlist_buttons_rendered"))}et(),document.addEventListener("wishlist_button_initialize",et)}]);